#!/usr/bin/env bash

cat /dev/null > /tmp/tslint.out
args=$(printf "%q\t" "$@")

# args :
#
#   --format json --config /local/path/tslint.json \
#   --project /local/path/tsconfig.json /local/path/flycheck_*.ts

args=${args//flycheck_/}
args=${args//$PROJECT_LOCAL_PATH/$PROJECT_REMOTE_PATH}

ssh "$HOST_USER@$HOST_IP" -p "$HOST_PORT" -tt \
    "${PROJECT_TSLINT_CMD//tslint\'/tslint} $args'" >> /tmp/tslint.out

code="$?"

cat /tmp/tslint.out
exit "$code"
